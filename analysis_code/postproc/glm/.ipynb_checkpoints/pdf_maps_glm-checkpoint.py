"""-----------------------------------------------------------------------------------------pdf_maps_glm.py-----------------------------------------------------------------------------------------Goal of the script:Concat all subject GLM pdf in one-----------------------------------------------------------------------------------------Input(s):sys.argv[1]: main project directorysys.argv[2]: project name (correspond to directory)sys.argv[3]: number of subjectssys.argv[4]: group-----------------------------------------------------------------------------------------Output(s):pdf files with pycortex maps-----------------------------------------------------------------------------------------To run:0. To Run on meso (not on node)1. cd to function>>  cd ~/projects/RetinoMaps/analysis_code/postproc/glm/2. run python command>> python pdf_maps_glm.py [main directory] [project name] [group]-----------------------------------------------------------------------------------------Exemple:python pdf_maps_glm.py /scratch/mszinte/data RetinoMaps 327-----------------------------------------------------------------------------------------Written by Martin Szinte (mail@martinszinte.net)Edited by Uriel Lascombes (uriel.lascombes@laposte.net)-----------------------------------------------------------------------------------------"""# General importsimport sysfrom pypdf import PdfMergerimport osimport json# Inputsmain_dir = sys.argv[1]project_dir = sys.argv[2]group = sys.argv[3]# load settingswith open('../../settings.json') as f:    json_s = f.read()    analysis_info = json.loads(json_s)subjects = analysis_info['subjects']formats = analysis_info['formats']extensions = analysis_info['extensions']for format_, extension in zip(formats, extensions):    #Glm pdf    merger = PdfMerger()    for n, subject in enumerate(subjects):        pdf_dir = '{}/{}/derivatives/pp_data/{}/{}/glm/pycortex/flatmaps_glm'.format(main_dir,project_dir,subject,format_)        pdf_fn = '{}_final_final.pdf'.format(subject)        merger.append('{}/{}'.format(pdf_dir,pdf_fn))                pdf_dir = "{}/{}/derivatives/pp_data/sub-all/{}/glm/pycortex".format(main_dir,project_dir,format_)    os.makedirs(pdf_dir, exist_ok = True)        merger.write('{}/sub-all_glm_final.pdf'.format(pdf_dir))            merger.close()    # # Define permission cmd# os.system("chmod -Rf 771 {main_dir}/{project_dir}".format(main_dir=main_dir, project_dir=project_dir))# os.system("chgrp -Rf {group} {main_dir}/{project_dir}".format(main_dir=main_dir, project_dir=project_dir, group=group))